<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Шашки</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 0;
      padding: 0;
      background-color: #f0f0f0;
      font-family: Arial, sans-serif;
    }
    .header {
      width: 100%;
      padding: 10px;
      background-color: #333;
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .room-list {
      display: flex;
      gap: 10px;
      overflow-x: auto;
      padding: 10px;
    }
    .room {
      padding: 10px;
      background-color: #007bff;
      color: white;
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      min-width: 80px;
    }
    .room.active {
      background-color: #28a745;
    }
    .room.full {
      background-color: #dc3545;
      cursor: not-allowed;
    }
    .game-container {
      display: flex;
      margin-top: 20px;
      gap: 20px;
    }
    .board {
      display: grid;
      grid-template-columns: repeat(8, 80px);
      grid-template-rows: repeat(8, 80px);
      border: 2px solid #333;
    }
    .cell {
      width: 80px;
      height: 80px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
    }
    .cell:nth-child(odd):nth-child(even),
    .cell:nth-child(even):nth-child(odd) {
      background-color: #769656;
    }
    .cell:nth-child(odd):nth-child(odd),
    .cell:nth-child(even):nth-child(even) {
      background-color: #eeeed2;
    }
    .piece {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      cursor: grab;
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
      font-weight: bold;
    }
    .piece.black {
      background-color: black;
    }
    .piece.white {
      background-color: white;
    }
    .piece.king::after {
      content: "♛";
      font-size: 36px;
    }
    .chat {
      width: 300px;
      display: flex;
      flex-direction: column;
      border: 2px solid #333;
      border-radius: 8px;
      background-color: white;
      overflow: hidden;
    }
    .chat-messages {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
      background-color: #f9f9f9;
      max-height: 500px;
    }
    .chat-input {
      display: flex;
      padding: 10px;
      border-top: 1px solid #ccc;
      background-color: #fff;
    }
    .chat-input input {
      flex: 1;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .chat-input button {
      margin-left: 10px;
      padding: 10px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Шашки</h1>
    <div class="room-list" id="roomList"></div>
  </div>
  <div class="game-container">
    <div class="board" id="board"></div>
    <div class="chat">
      <div class="chat-messages" id="chatMessages"></div>
      <div class="chat-input">
        <input type="text" id="chatInput" placeholder="Введите сообщение">
        <button id="chatSend">Отправить</button>
      </div>
    </div>
  </div>

  <script>
    // Комнаты
    const roomList = document.getElementById("roomList");
    const rooms = Array(10).fill({ players: 0 });

    rooms.forEach((room, index) => {
      const roomElement = document.createElement("div");
      roomElement.classList.add("room");
      roomElement.innerText = `${index + 1}: ${room.players}/2`;
      roomElement.dataset.index = index;
      roomElement.onclick = () => joinRoom(index);
      roomList.appendChild(roomElement);
    });

    function joinRoom(index) {
      const room = rooms[index];
      if (room.players < 2) {
        room.players++;
        updateRoomDisplay();
        alert(`Вы присоединились к комнате ${index + 1}`);
        if (room.players === 2) {
          startGame(index);
        }
      } else {
        alert("Комната заполнена!");
      }
    }

    function updateRoomDisplay() {
      document.querySelectorAll(".room").forEach((roomElement, index) => {
        const room = rooms[index];
        roomElement.innerText = `${index + 1}: ${room.players}/2`;
        roomElement.classList.toggle("full", room.players === 2);
      });
    }

    // Игра
    const board = document.getElementById("board");
    let boardState = Array(8)
      .fill(null)
      .map(() => Array(8).fill(null));

    function startGame(roomIndex) {
      alert(`Игра в комнате ${roomIndex + 1} началась!`);
      renderBoard();
    }

    function renderBoard() {
      board.innerHTML = "";
      for (let row = 0; row < 8; row++) {
        for (let col = 0; col < 8; col++) {
          const cell = document.createElement("div");
          cell.classList.add("cell");
          cell.dataset.row = row;
          cell.dataset.col = col;
          board.appendChild(cell);
        }
      }
    }

    // Чат
    const chatMessages = document.getElementById("chatMessages");
    const chatInput = document.getElementById("chatInput");
    const chatSend = document.getElementById("chatSend");

    chatSend.onclick = () => {
      const message = chatInput.value;
      if (message.trim()) {
        addMessage(`Вы: ${message}`);
        chatInput.value = "";
      }
    };

    function addMessage(message) {
      const messageElement = document.createElement("div");
      messageElement.innerText = message;
      chatMessages.appendChild(messageElement);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }
  </script>
</body>
</html>
